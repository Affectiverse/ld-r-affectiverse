---
layout: default
title: Deploy LD-R on Heroku
section: herokuTutorial
path: docs/herokuTutorial.html
---

<h1 class="ui dividing header">
How to deploy LD-R on Heroku?
</h1>
<div class="ui info message">
  <i class="ui circular yellow info icon"></i>
    <a href="http://heroku.com/">Heroku</a> is a cloud Platform-as-a-Service (PaaS) supporting several programming languages among them NodeJS which can be used to deploy your LD-R instances on a scalable cloud infrastructure.
</div>
<p>
    the first step is to go to <a href="http://heroku.com/">Heroku</a> website and create an account which will allow you to deploy up to 5 instances for free. Then, open your command line shell and type:
</p>
<pre style='color:#000000;background:#ffffff;'>heroku login
</pre>
<p>
    Once logged in, you need to clone LD-R git repository:
</p>
<pre style='color:#000000;background:#ffffff;'>git clone https<span style='color:#800080; '>:</span><span style='color:#696969; '>//github.com/ali1k/ld-r.git heroku-ldr</span>
</pre>
<p>
    After running the above command, you will have a clone of LD-R in <i>heroku-ldr</i> directory. Now, go to that directory by simply:
</p>
<pre style='color:#000000;background:#ffffff;'>cd heroku<span style='color:#808030; '>-</span>ldr
</pre>
<p>
    Now it is time to create an app on Heroku:
</p>
<pre style='color:#000000;background:#ffffff;'>heroku create
</pre>
<p>
    Heroku generates a random name for your app, or you can pass a parameter to specify your own app name. Now deploy your code:
</p>
<pre style='color:#000000;background:#ffffff;'>git push heroku master
</pre>
<p>
    The application seems to be deployed now. Ensure that at least one instance of the app is running:
</p>
<pre style='color:#000000;background:#ffffff;'>heroku ps<span style='color:#800080; '>:</span>scale web<span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span>
</pre>
<p>
    Now visit the app at the URL generated by its app name. As a handy shortcut, you can open the website as follows:
</p>
<pre style='color:#000000;background:#ffffff;'>heroku open
</pre>
<p>
    But hold on! something is wrong if you are getting an error message! Run the following command to see what went wrong:
</p>
<pre style='color:#000000;background:#ffffff;'>heroku logs <span style='color:#808030; '>-</span><span style='color:#808030; '>-</span>tail
</pre>
<p>
    You can see that there are a bunch of issues when Heroku started to deploy LD-R. Let's resolve them step by step:
</p>
<p>
    Heroku is a production server. So, it doesn't care about all fancy babel, webpack stuff we have put in the LD-R framework! So, we need to get rid of them by building the app first and then move the built bundles to Heroku!
    To build the app, you need to follow the instructions for production mode in <a href="/docs/quickstart.html">installation page</a> and add your desirable configs.
</p>
    Now you should get all the required bundles in your 'build' folder which is initially ignored by Git. Stop the build script and as next step go to your .gitignore file and simply replace its content by:
</p>
<pre style='color:#000000;background:#ffffff;'>node_modules
</pre>
<p>
    As Heroku is only interested in your production mode, open the 'server.js' file and hardcode the env to 'production':
</p>
<pre style='color:#000000;background:#ffffff;'><span style='color:#696969; '>//heroku</span>
<span style='color:#800000; font-weight:bold; '>const</span> env <span style='color:#808030; '>=</span> <span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>'production'</span><span style='color:#800080; '>;</span>
</pre>
<p>
You also need to copy npm dev_dependencies to normal dependencies in package.json file.
</p>
<p>
    There is only one more step left to finish the deployment preparation. You need to add a file called '<a href="https://devcenter.heroku.com/articles/procfile">Procfile</a>' to your repo with the following content:
</p>
<pre style='color:#000000;background:#ffffff;'><span style='color:#e34adc; '>web:</span> npm start
</pre>
<p>
    The Procfile is a text file in the root directory of your application, to explicitly declare what command should be executed to start your app on Heroku. Now its time to test our deployment by pushing our changes to heroku branch:
</p>
<pre style='color:#000000;background:#ffffff;'>git add <span style='color:#808030; '>.</span>
git commit <span style='color:#808030; '>.</span> <span style='color:#808030; '>-</span>m <span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>'LD-R is ready for deployment'</span>
git push heroku master
</pre>
<p>
    Now you should be able to visit your Heroku app URL again, be a little bit patient and then see your LD-R instance running there successfully just like what I see for my sample Heroku LD-R app: <a href="https://ldr1.herokuapp.com/">https://ldr1.herokuapp.com/</a>.
</p>
